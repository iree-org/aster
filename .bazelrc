# Common settings
common --enable_bzlmod
common --experimental_cc_static_library

# Build settings
build --cxxopt=-std=c++17
build --host_cxxopt=-std=c++17

# LLVM build optimizations
build --compilation_mode=opt
build --copt=-O3

# Toolchain preset requires Bazel 9; skip for now
# try-import %workspace%/toolchains_llvm_bootstrapped/tools/preset.bazelrc

# Cross-compilation targets
build:linux_arm64 --platforms=@toolchains_llvm_bootstrapped//platforms:linux_aarch64
build:linux_amd64 --platforms=@toolchains_llvm_bootstrapped//platforms:linux_x86_64

# Disable zlib/zstd for cross-compilation (LLVM uses <zlib.h> which fails cross-compile)
build:linux_amd64 --@llvm-project//third-party:llvm_enable_zlib=false
build:linux_amd64 --@llvm-project//third-party:llvm_enable_zstd=false
build:linux_arm64 --@llvm-project//third-party:llvm_enable_zlib=false
build:linux_arm64 --@llvm-project//third-party:llvm_enable_zstd=false
